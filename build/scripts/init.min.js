function StringBuffer(){this.buffer=[]}function Utf8EncodeEnumerator(a){this._input=a,this._index=-1,this._buffer=[]}function Base64DecodeEnumerator(a){this._input=a,this._index=-1,this._buffer=[]}StringBuffer.prototype.append=function(a){return this.buffer.push(a),this},StringBuffer.prototype.toString=function(){return this.buffer.join("")};var Base64={codex:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",encode:function(a){for(var b=new StringBuffer,c=new Utf8EncodeEnumerator(a);c.moveNext();){var d=c.current;c.moveNext();var e=c.current;c.moveNext();var f=c.current,g=d>>2,h=(3&d)<<4|e>>4,i=(15&e)<<2|f>>6,j=63&f;isNaN(e)?i=j=64:isNaN(f)&&(j=64),b.append(this.codex.charAt(g)+this.codex.charAt(h)+this.codex.charAt(i)+this.codex.charAt(j))}return b.toString()},decode:function(a){for(var b=new StringBuffer,c=new Base64DecodeEnumerator(a);c.moveNext();){var d=c.current;if(128>d)b.append(String.fromCharCode(d));else if(d>191&&224>d){c.moveNext();var e=c.current;b.append(String.fromCharCode((31&d)<<6|63&e))}else{c.moveNext();var e=c.current;c.moveNext();var f=c.current;b.append(String.fromCharCode((15&d)<<12|(63&e)<<6|63&f))}}return b.toString()}};Utf8EncodeEnumerator.prototype={current:Number.NaN,moveNext:function(){if(this._buffer.length>0)return this.current=this._buffer.shift(),!0;if(this._index>=this._input.length-1)return this.current=Number.NaN,!1;var a=this._input.charCodeAt(++this._index);return 13==a&&10==this._input.charCodeAt(this._index+1)&&(a=10,this._index+=2),128>a?this.current=a:a>127&&2048>a?(this.current=a>>6|192,this._buffer.push(63&a|128)):(this.current=a>>12|224,this._buffer.push(a>>6&63|128),this._buffer.push(63&a|128)),!0}},Base64DecodeEnumerator.prototype={current:64,moveNext:function(){if(this._buffer.length>0)return this.current=this._buffer.shift(),!0;if(this._index>=this._input.length-1)return this.current=64,!1;var a=Base64.codex.indexOf(this._input.charAt(++this._index)),b=Base64.codex.indexOf(this._input.charAt(++this._index)),c=Base64.codex.indexOf(this._input.charAt(++this._index)),d=Base64.codex.indexOf(this._input.charAt(++this._index)),e=a<<2|b>>4,f=(15&b)<<4|c>>2,g=(3&c)<<6|d;return this.current=e,64!=c&&this._buffer.push(f),64!=d&&this._buffer.push(g),!0}},function(){function Game(){function get_item_cost(a){var b=(a.quantity+1)*a.base_cost*(a.quantity+1);return a.quantity+1>10&&(b*=2),b}function get_item_sell_value(a){return.5*get_item_last_cost(a)*gd.roi}function get_item_last_cost(a){var b=a.quantity*a.base_cost*a.quantity;return a.quantity>10&&(b*=2),b}function setup_wages(){$("input.wage").val(gd.wage.percent),$("input.wage").change(set_wage)}function set_wage(){gd.wage.percent=$("input.wage").val()}function setup_makers(){var a=[];for(var b in gd.makers)a.push([b,gd.makers[b].cost]);var c=a.sort(function(a,b){return a[1]-b[1]});for(var d in c){var b=c[d][0],e=gd.makers[b],f="<div class='item' id='{{k}}'><h3>{{cl.label}}</h3><label id='{{k}}-amt' class='grey pull_right'>{{cl.quantity}}</label><p class='small'><b>$<span id='{{k}}-cst'>{{cl.cost}}</span></b> — <em class='grey'>{{cl.description}}</em></p><button class='buy' id='{{k}}-btn'>Purchase</button><button class='sell' id='{{k}}-sell-btn'>Sell</button></div>",g={k:b,cl:e},h=Mustache.to_html(f,g);$("#makers").prepend(h)}$("#makers .buy").click(function(){buy_makers($(this).attr("id").split("-").shift())}),$("#makers .sell").click(function(){sell_makers($(this).attr("id").split("-").shift())})}function setup_sellers(){var a=[];for(var b in gd.sellers)a.push([b,gd.sellers[b].cost]);var c=a.sort(function(a,b){return a[1]-b[1]});for(var d in c){var b=c[d][0],e=gd.sellers[b],f="<div class='item' id='{{k}}'><h3>{{cl.label}}</h3><label id='{{k}}-amt' class='grey pull_right'>{{cl.quantity}}</label><p class='small'><b>$<span id='{{k}}-cst'>{{cl.cost}}</span></b> — <em class='grey'>{{cl.description}}</em></p><button class='buy' id='{{k}}-btn'>Purchase</button><button class='sell' id='{{k}}-sell-btn'>Sell</button></div>",g={k:b,cl:e},h=Mustache.to_html(f,g);$("#sellers").prepend(h)}$("#sellers .buy").click(function(){buy_sellers($(this).attr("id").split("-").shift())}),$("#sellers .sell").click(function(){sell_sellers($(this).attr("id").split("-").shift())})}function setup_managers(){}function setup_upgrades(){}function setup_achievements(){var a=[];for(var b in gd.achievements)a.push([b,gd.achievements[b].group]);var c=a.sort(function(a,b){return a[1]-b[1]}),d=$("#achievements");d.html("");for(var e in c){var b=c[e][0],f=gd.achievements[b],g="<div class='item' id='{{k}}'><h3>{{cl.label}}</h3> - <em class='grey'>{{cl.description}}</em></div>",h={k:b,cl:f},i=Mustache.to_html(g,h);$("#achievements").prepend(i)}}function update_display(){fix_sellers(),fix_makers(),fix_stats(),fix_display(),fix_achievements(),fix_unlocks()}function fix_display(){$(".money").html(pretty_int(gd.cash.amount)),$("#sell_roi").html(gd.sell_roi.toFixed(2));var a=gd.stats.seller_rps;gd.stats.seller_rps>gd.stats.maker_rps&&gd.stuff.quantity<gd.stats.seller_rps&&(a=gd.stats.maker_rps),$(".seller_rps").html(pretty_int(a)),$(".amount").html(pretty_int(gd.stuff.quantity)),$("#clicker_rps").html(pretty_int(gd.stats.maker_rps-gd.stats.seller_rps)),$("#clicker_rps_g").html(pretty_int(gd.stats.maker_rps)),$(".wage_ps").html(pretty_int(gd.wage.to_pay)),$(".you_make").html(you_make(gd.you_make))}function you_make(a){return a>0?"making money":0>a?"losing money":"neither making nor losing money"}function fix_stats(){gd.stats.seconds_played+=1}function fix_achievements(){for(var a in gd.achievements){var b=gd.achievements[a],c=$("#"+a),d=$("#"+a+"_lbl");!b.hidden||b.unlocked?b.unlocked?(c.removeClass("hidden"),c.removeClass("semi_trans"),d.addClass("purchased"),c.removeClass("locked")):(c.addClass("locked"),c.addClass("semi_trans")):c.addClass("hidden")}}function fix_sellers(){for(k in gd.sellers){var a=$("#"+k),b=$("#"+k+"-btn"),c=$("#"+k+"-sell-btn"),d=$("#"+k+"-amt"),e=$("#"+k+"-cst"),f=$("#"+k+"-rps"),g=$("#"+k+"-rsk"),h=gd.sellers[k];h.cost=get_item_cost(h),h.quantity<1?c.attr("disabled",!0):c.attr("disabled",!1),h.cost>gd.cash.amount?b.attr("disabled",!0):b.attr("disabled",!1),h.unlocked?a.removeClass("hidden"):a.addClass("hidden"),e.html(pretty_bigint(h.cost)),d.html(pretty_int(h.quantity)),f.html(pretty_bigint(h.rps)),g.html(pretty_int(100*h.risk))}}function fix_makers(){for(var a in gd.makers){var b=$("#"+a),c=$("#"+a+"-btn"),d=$("#"+a+"-sell-btn"),e=$("#"+a+"-amt"),f=$("#"+a+"-cst"),g=$("#"+a+"-rps"),h=$("#"+a+"-rsk"),i=gd.makers[a];i.quantity>0?d.attr("disabled",!1):d.attr("disabled",!0),i.cost=get_item_cost(i),i.cost>gd.cash.amount?c.attr("disabled",!0):c.attr("disabled",!1),i.unlocked?b.removeClass("hidden"):b.addClass("hidden"),f.html(pretty_bigint(i.cost)),e.html(pretty_int(i.quantity)),g.html(pretty_bigint(i.rps)),h.html(pretty_int(100*i.risk))}}function buy_makers(a){var b=gd.makers[a];return spend_cash(b.cost)?(b.quantity+=1,gd.stats.workers_employed+=1,message("You have purchased "+b.label+" for $"+pretty_bigint(b.cost)),fix_makers(),!0):!1}function sell_makers(a){var b=gd.makers[a];if(b.quantity<1)return!1;var c=get_item_sell_value(b);return earn_cash(c*gd.sell_roi),b.quantity-=1,!0}function buy_sellers(a){var b=gd.sellers[a];return spend_cash(b.cost)?(b.quantity+=1,message("You have purchased "+b.label+" for $"+pretty_bigint(b.cost)),fix_sellers(),!0):!1}function sell_sellers(a){var b=gd.sellers[a];if(b.quantity<1)return!1;var c=get_item_sell_value(b);return earn_cash(c),message("You sold a "+b.label+" for $"+pretty_bigint(c)),b.quantity-=1,!0}function earn_cash(a){return gd.cash.amount+=a,!0}function do_make(a){return gd.stuff.quantity+=a,gd.stats.made_stuff+=a,!0}function do_sell(a){return gd.stuff.quantity<1?0:a>gd.stuff.quantity&&(a=gd.stuff.quantity,1>a)?0:(gd.stats.sold_stuff+=a,gd.stuff.quantity-=a,earn_cash(a*gd.roi),gd.stats.cash_earned+=a*gd.roi,a)}function do_wage(a){return a>gd.cash.amount,gd.stats.wages_paid+=a,spend_cash(a*gd.roi),a}function spend_cash(a){return a>gd.cash.amount?!1:(gd.cash.amount-=a,gd.stats.total_spent+=a,set_wage(),!0)}function check_achievements(){for(var a in gd.achievements){var b=gd.achievements[a];if(!b.unlocked){for(var c=b.property.split("."),d=gd,e=0;e<c.length;e++)d=d[c[e]];d===!0&&d===b.required?unlock_achievement(a):d&&(b.required>=0&&d>=b.required||b.required<0&&d<=b.required)&&unlock_achievement(a)}}}function unlock_achievement(a){var b=gd.achievements[a];return b?b.unlocked?!1:(b.unlocked=!0,good_message("You have earned a new achievement: <em>"+b.label+"</em>"),!0):!1}function get_hex_from_int(a){return a.toString(24)}function get_int_from_hex(a){return parseInt(a,24)}function gd_to_json(){var a={c:get_hex_from_int(Math.round(gd.cash.amount)),w:get_hex_from_int(Math.round(gd.stuff.quantity)),p:get_hex_from_int(Math.round(gd.wage.percent)),tp:get_hex_from_int(Math.round(gd.wage.to_pay)),pop:get_hex_from_int(Math.round(gd.pop)),hap:get_hex_from_int(Math.round(gd.happy))},b={makers:"cl",sellers:"sl",banks:"bn"};for(var c in b){var d=gd[c],e=b[c],f=[];for(var g in d)d[g].unlocked&&f.push(d[g].sid+":"+get_hex_from_int(d[g].quantity));a[e]=f.join("|")}var h=[];for(var c in gd.upgrades){var i=gd.upgrades[c];i.purchased&&h.push(i.sid)}a.u=h.join("|");var j=[];for(var c in gd.stats)j.push(c+":"+get_hex_from_int(gd.stats[c]));return a.s=j.join("|"),a}function update_gd_from_save(){if(localStorage.ac){var a=$.parseJSON(Base64.decode(localStorage.ac));update_ac_from_json(a)}if(localStorage.sv){var b=$.parseJSON(Base64.decode(localStorage.sv));update_gd_from_json(b),window.sv=b}}function update_gd_from_json(a){gd.cash.amount=get_int_from_hex(a.c),a.cs&&(gd.cash.safe=get_int_from_hex(a.cs)),gd.wage.percent=get_int_from_hex(a.p),gd.wage.to_pay=get_int_from_hex(a.tp),gd.stuff.quantity=get_int_from_hex(a.w);var b={banks:"bn",makers:"cl",sellers:"sl"};for(var c in b){var d=b[c];if(a[d])for(var e=a[d].split("|"),f=0;f<e.length;f++){var g=e[f].split(":");for(var h in gd[c])gd[c][h].sid==g[0]&&(gd[c][h].quantity=get_int_from_hex(g[1]),gd[c][h].unlocked=!0)}}var i=a.u.split("|");for(var h in gd.upgrades){var j=gd.upgrades[h];i.indexOf(j.sid)>-1&&apply_upgrade(h)}var k=a.s.split("|");for(var h in gd.stats)for(var f=0;f<k.length;f++){var l=k[f].split(":");l[0]==h&&(gd.stats[h]=get_int_from_hex(l[1]))}}function fix_unlocks(){var a=0,b=0;for(var c in gd.makers){b+=1;var d=gd.makers[c];d.unlock_rps<=gd.stats.seller_rps&&(d.unlocked=!0,a+=1)}$("#clickers_unlocked").html(pretty_int(a)),$("#clickers_total").html(pretty_int(b));var e=0,f=0;for(var c in gd.sellers){f+=1;var g=gd.sellers[c];g.unlock_rps<=gd.stats.seller_rps&&(e+=1,g.unlocked=!0)}$("#sellers_unlocked").html(pretty_int(a)),$("#sellers_total").html(pretty_int(b));var h=0,i=0;for(var c in gd.achievements){var j=gd.achievements[c];(j.unlocked||!j.hidden)&&(j.unlocked&&(h+=1),i+=1)}$("#achievements_unlocked").html(pretty_int(h)),$("#achievements_total").html(pretty_int(i))}function add_message(a,b){var c=$("<div></div>");c.html(a),c.addClass(b),$("#last_message").html($(c).clone().wrap("<p>").parent().html()),$("#messages").prepend(c),$("#messages div").length>45&&$("#messages div:last").remove()}function error(a){add_message("&#10007; "+a,"error")}function message(a){add_message("&#9993; "+a,"message")}function good_message(a){add_message("&#9733; "+a,"good_message")}function bad_message(a){add_message("&#10007; "+a,"bad_message")}function pretty_int(a){a=1e3>a?Math.round(10*a)/10:Math.round(a);var b=a.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",");return b}function run_event(evk){gd.events[evk]&&eval(gd.events[evk].action)}function event_found_cash(a){var b=gd.stats.seller_rps*gd.roi*a;return 100>b&&(b=100),earn_cash(b),b>1e10?void good_message("A mystery benefactor has contributed $"+pretty_bigint(b)+" to your cause"):b>1e7?void good_message("You found a truck load of cash, containing $"+pretty_bigint(b)+" inside!"):b>1e5?void good_message("You found a briefcase with $"+pretty_int(b)+" inside!"):void good_message("You found some extra cash hidden in a shoe box, worth $"+pretty_int(b)+"!")}function event_worker_die(a){return gd.happy>50?void 0:(worker_lost(a),worker_lost()?1==a?void bad_message("Oh no. A worker died on the job"):void bad_message("Oh no. "+pretty_int(a)+" died in apparent mass-suicides"):void 0)}function worker_lost(){var a=[];for(var b in gd.makers){var c=gd.makers[b];c.quantity>0&&a.push(b)}if(a.length<1)return!1;var d=a[Math.floor(Math.random()*a.length)];return gd.makers[d].quantity-=1,!0}var gd={title:"",version:"0.0.1",roi:1,sell_roi:.5,pop:50,happy:50,you_make:0,make_amount:1,sell_amount:1,wage:{percent:50,to_pay:0},cash:{amount:0,label:"Cash"},stuff:{quantity:0},makers:{kid_worker:{label:"Child",quantity:0,description:"Kid hired for small hands that can grab in the machines",rps:.2,base_cost:20,cost:20,unlocked:!0,sid:"m1"},unskilled_worker:{label:"Unskilled Worker",quantity:0,description:"High-school graduate",rps:1,base_cost:210,cost:210,unlocked:!0,sid:"m2"},worker:{label:"Worker",quantity:0,description:"Husband with wife and two kids",rps:5,base_cost:1e3,cost:1e3,unlocked:!1,unlock_rps:1.2,sid:"m3"},"05_factory":{label:"Small Factory",description:"A small factory in a bad neighbourhood",quantity:0,rps:25,base_cost:5e3,cost:5e3,unlock_rps:6,unlocked:!1,sid:"c4"},"07_warehouse":{label:"Abandoned Warehouse",description:"A large abandoned warehouse with vaulted ceilings",quantity:0,rps:100,risk:.05,base_cost:25e3,cost:25e3,unlock_rps:50,unlocked:!1,sid:"c5"}},sellers:{unskilled_salesman:{label:"Unskilled Salesman",quantity:0,description:"Negotiates to sell your product to the big corporations",rps:.2,base_cost:20,cost:20,unlocked:!0,sid:"s1"},salesman:{label:"Door-to-door Salesman",quantity:0,description:"Sell your phones, direct to the customer",rps:1,base_cost:230,cost:230,unlocked:!0,sid:"s2"},market_van:{label:"Market Van",description:"A run-down van that actively seeks out customers",quantity:0,risk:.05,rps:8,base_cost:2300,cost:2300,unlocked:!0,sid:"s3"},grotty_shop:{label:"Grotty Shop",description:"Purchase a grubby little shop and sell your product to the punters",quantity:0,rps:100,base_cost:25e3,cost:25e3,unlock_rps:50,unlocked:!1,sid:"s5"},shiny_shop:{label:"Shiny Shop",description:"A wonderful place to sell your product",quantity:0,rps:400,base_cost:125e3,cost:125e3,unlock_rps:250,unlocked:!1,sid:"s7"}},managers:{},upgrades:{},achievements:{employment_1:{label:"Partnership!",description:"Buy - I mean, employ - a worker",property:"stats.workers_employed",required:1,unlocked:!1,hidden:!1,value:1,group:10,min_time:1,sid:"a01"},employment_2:{label:"Private Limited Company!",description:"Buy ten workers",property:"stats.workers_employed",required:10,unlocked:!1,hidden:!1,value:2,group:12,min_time:1,sid:"a02"},employment_3:{label:"Public Limited Company!",description:"Buy one hundred workers",property:"stats.workers_employed",required:100,unlocked:!1,hidden:!1,value:3,group:12,min_time:1,sid:"a03"},kid_1:{label:"Day Care",description:"Hire a kid",property:"makers.kid_worker.quantity",required:1,unlocked:!1,hidden:!1,value:1,group:20,min_time:1,sid:"a04"},kid_2:{label:"Child-friendly Employer",description:"Hire ten kids",property:"makers.kid_worker.quantity",required:10,unlocked:!1,hidden:!1,value:1,group:21,min_time:1,sid:"a05"},kid_3:{label:"Child Army",description:"Hire one hundred kids",property:"makers.kid_worker.quantity",required:100,unlocked:!1,hidden:!1,value:1,group:21,min_time:1,sid:"a05"},a_playtime1:{label:"A Minute of Your Time",description:"You've managed a factory for 1 minute",property:"stats.seconds_played",required:60,unlocked:!1,hidden:!1,value:1,group:301,min_time:1,sid:"a22"},a_playtime2:{label:"Five Minutes of Fame",description:"You've managed a factory for 5 minutes",property:"stats.seconds_played",required:300,unlocked:!1,hidden:!1,value:2,group:302,min_time:1,sid:"a23"},a_playtime3:{label:"First Factory Hour",description:"You've managed a factory for an hour",property:"stats.seconds_played",required:3600,unlocked:!1,hidden:!1,value:3,group:303,min_time:1,sid:"a24"},a_playtime4:{label:"Half a day down the drain",description:"You've managed a production empire for 12 hours",property:"stats.seconds_played",required:43200,unlocked:!1,hidden:!1,value:5,group:304,min_time:1,sid:"a25"},a_playtime5:{label:"Addict",description:"You've managed a production empire for an entire day",property:"stats.seconds_played",required:86400,unlocked:!1,hidden:!1,value:10,group:305,min_time:1,sid:"a26"},a_playtime6:{label:"Junkie",description:"You've managed a production empire for an entire week!",property:"stats.seconds_played",required:432e3,unlocked:!1,hidden:!1,value:10,group:306,min_time:1,sid:"a27"},a_playtime7:{label:"Burnout",description:"You've managed a production empire for a month! Dayum!",property:"stats.seconds_played",required:2592e3,unlocked:!1,hidden:!1,value:10,group:307,min_time:1,sid:"a28"},cheat_cash:{label:"Cheat cash",description:"You hacked in some cash!",property:"stats.cash_cheated",required:1,unlocked:!1,hidden:!0,value:11,group:307,min_time:1,sid:"a29"},cheat_stuff:{label:"Cheat stuff",description:"You hacked in some product!",property:"stats.stuff_cheaed",required:1,unlocked:!1,hidden:!0,value:11,group:307,min_time:1,sid:"a30"}},events:{cash_found_small:{chance:.05,action:"event_found_cash(60)"},cash_found_med:{chance:.005,action:"event_found_cash(240)"},cash_found_large:{chance:.001,action:"event_found_cash(640)"},worker_die:{chance:.0075,action:"event_worker_die(1)"}},stats:{seconds_played:0,maker_rps:0,seller_rps:0,made_stuff:0,stuff_cheated:0,sold_stuff:0,cash_earned:0,cash_cheated:0,wage_ps:0,wages_paid:0,wages_flunked:0,workers_employed:0,start_time:(new Date).getTime()}};window.add_cash=function(a){earn_cash(a),gd.stats.cash_cheated+=a},window.add_stuff=function(a){gd.stuff.quantity+=a,gd.stats.stuff_cheated+=a},this.do_setup=function(){setup_makers(),setup_sellers(),setup_managers(),setup_upgrades(),setup_achievements(),setup_wages()},window.stats=gd.stats,this.tick=function(){var a=(new Date).getTime(),b=1e3/tick_ms,c=Math.round((a-last_tick)/tick_ms);if(c>36e4)c=36e4;else if(1>c)return;last_tick=a,e=0,h=0;var d=0;if(c>36e4)c=36e4;else if(1>c)return;var e=0;for(var f in gd.makers){var g=gd.makers[f];e+=g.quantity*g.rps,d+=g.quantity*g.rps}gd.stats.maker_rps=e,e/=b,do_make(e*c);var h=0;for(var f in gd.sellers){var i=gd.sellers[f];h+=i.quantity*i.rps,d+=i.quantity*i.rps}gd.stats.seller_rps=h,h/=b,do_wage(d*c*(gd.wage.percent/100)),gd.wage.to_pay=d*(gd.wage.percent/100),gd.you_make=do_sell(h*c)-d*c*(gd.wage.percent/100),check_achievements(),update_display(),window.gd=gd},this.sec_tick=function(){},this.do_sell_click=function(){var a=(new Date).getTime();if(70>a-last_click)return!1;last_click=a;var b=do_sell(.5*this.get_click_sell_amount());return b?(gd.sell_roi=b,b):0},this.do_make_click=function(){var a=(new Date).getTime();if(70>a-last_click)return!1;last_click=a;var b=this.get_click_make_amount();do_make(b)},this.get_click_sell_amount=function(){return gd.sell_amount+gd.stats.seller_rps},this.get_click_make_amount=function(){return gd.make_amount+gd.stats.maker_rps},this.do_save=function(){localStorage.sv=Base64.encode(JSON.stringify(gd_to_json()))},this.do_load=function(){(localStorage.sv||localStorage.ac)&&update_gd_from_save()},window.pretty_bigint=function(a){var b="";return a>=1e24?pretty_int(a):a>=1e21?(b=Math.round(a/1e21*100)/100,b+"S"):a>=1e18?(b=Math.round(a/1e18*100)/100,b+"Qt"):a>=1e15?(b=Math.round(a/1e15*100)/100,b+"Q"):a>=1e12?(b=Math.round(a/1e12*100)/100,b+"T"):a>=1e9?(b=Math.round(a/1e9*100)/100,b+"B"):a>=1e6?(b=Math.round(a/1e6*100)/100,b+"M"):pretty_int(a)},this.get_roi=function(){return gd.roi},this.check_events=function(){for(var a in gd.events){var b=Math.random();gd.events[a].chance>b&&run_event(a)}}}var last_tick=(new Date).getTime(),tick_ms=250,save_ms=2500,last_click=0;!function(){function a(a,h){h.forEach(function(a){a.date=f(a.Date),a.close=+a.Close}),d.domain(d3.extent(h,function(a){return a.date})),e.domain(d3.extent(h,function(a){return a.close}));var i=d3.select(a).append("svg").attr("width",b).attr("height",c).append("g").attr("transform","translate(0, 2)");i.append("path").datum(h).attr("class","sparkline").attr("d",g),i.append("circle").attr("class","sparkcircle").attr("cx",d(h[0].date)).attr("cy",e(h[0].close)).attr("r",1.5)}var b=100,c=25,d=d3.scale.linear().range([0,b-2]),e=d3.scale.linear().range([c-4,0]),f=d3.time.format("%d/%m/%Y").parse,g=d3.svg.line().interpolate("basis").x(function(a){return d(a.date)}).y(function(a){return e(a.close)});d3.csv("csv/apple.csv",function(b,c){a("#apple_stock",c)})}();var gm=new Game;$(document).ready(function(){function a(){function a(a){var b=$(window).scrollTop(),c=b+$(window).height(),d=$(a).offset().top,e=d+$(a).height();return d>b&&c>e}var b=!0;$(document).scroll(function(){a($(".game-container"))&&b&&($("body").chardinJs("start"),b=!1)})}$(".header").height($(window).height()),$(window).resize(function(){$(".header").height($(window).height())}),gm.do_load();{var b=(setInterval(gm.tick,tick_ms),setInterval(gm.sec_tick,1e3),10);setInterval(gm.do_save,save_ms),setInterval(gm.check_events,12e4)}gm.do_setup(),$("#make-click").click(function(a){gm.do_make_click();var c=$(".make_up:first").clone();c.html("+"+pretty_bigint(gm.get_click_make_amount())),$(".phone-stats").append(c),c.show(),c.offset({left:a.pageX-30,top:a.pageY-50});var d=a.clientY-150;if(c.css("opacity",100),1==b){var e=a.pageX;b=0}else{var e=a.pageX-60;b=1}c.animate({top:d.toString()+"px",opacity:0,left:e.toString()+"px"},750,function(){$(this).remove()})}),$("#sell-click").click(function(a){var c=gm.do_sell_click();if(0!=c){var d=$(".sell_up:first").clone();d.html("$"+pretty_bigint(c*gm.get_roi())),$(".cash-stats").append(d),d.show(),d.offset({left:a.pageX-30,top:a.pageY-50});var e=a.clientY-150;if(d.css("opacity",100),1==b){var f=a.pageX;b=0}else{var f=a.pageX-60;b=1}d.animate({top:e.toString()+"px",opacity:0,left:f.toString()+"px"},750,function(){$(this).remove()})}}),localStorage.sv||a(),$(".tabs").children().click(function(){var a=$(this).attr("class").split("-").pop();return $("#"+a).hasClass("active")||$(this).hasClass("active-tab")?!1:($(".items").children().removeClass("active"),$(".items").children().addClass("inactive"),$("#"+a).attr("class","active"),$(".tabs").children().removeClass("active-tab"),$(this).addClass("active-tab"),void 0)}),$("body").removeClass("loading")})}();